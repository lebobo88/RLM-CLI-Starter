# RLM Progress Tracking

This directory contains all pipeline progress tracking, session state, and execution artifacts.

## Directory Structure

```
progress/
├── session-state.json          # Current session state with history
├── checkpoint.json             # Session checkpoints and history
├── pipeline-state.json         # Pipeline phase progress
├── status.json                 # Task-level status
├── .session-context.md         # Human-readable session context (auto-generated)
├── .manage-session-state.ps1   # Session management utility (PowerShell)
├── .manage-session-state.sh    # Session management utility (Bash)
├── logs/                       # Session and agent logs
├── manifests/                  # Agent completion manifests
├── reports/                    # Pipeline progress reports
├── reviews/                    # Code review reports
├── verification/               # Feature verification reports
└── token-usage/                # Token usage tracking files
```

## Core State Files

### `session-state.json`
Current session state with full history. Includes:
- Session ID and pipeline ID
- Current phase and agent
- Automation level
- Active feature/task
- Token usage and thresholds
- Event history
- Metadata (workspace, branch, commit)

**Usage**: Read this file to get detailed session state. Use management utilities to update.

### `checkpoint.json`
Session checkpoints and history. Tracks:
- Last active session
- Session history across multiple runs
- Checkpoint timestamps

**Usage**: Updated automatically when checkpoints are saved. Used for session resumption.

### `pipeline-state.json`
Pipeline phase progress. Contains:
- Pipeline ID and metadata
- Automation level
- Current phase
- Status of all 9 phases
- Phase completion timestamps

**Usage**: Read to understand which phases are completed, active, or pending.

### `status.json`
Task-level status tracking. Includes:
- Current task
- Completed tasks list
- Blocked tasks list
- Last update timestamp

**Usage**: Track individual task progress during Phase 6 (Implementation).

### `.session-context.md`
Human-readable session context summary (auto-generated). Provides:
- Quick overview of session state
- Pipeline progress table
- Token usage statistics
- Recent activity
- Management commands

**Usage**: Read this first when resuming a session for quick orientation.

## Management Utilities

### `.manage-session-state.ps1` (PowerShell)
Session state management for Windows.

**Commands**:
```powershell
# Initialize new session
.\.manage-session-state.ps1 -Action init -SessionId "uuid" -PipelineId "PIPELINE-XXX" -Phase 1

# Update session state
.\.manage-session-state.ps1 -Action update -Event "event_name" -Description "Description"

# Read current state
.\.manage-session-state.ps1 -Action read

# Save checkpoint
.\.manage-session-state.ps1 -Action checkpoint

# Show history
.\.manage-session-state.ps1 -Action history
```

### `.manage-session-state.sh` (Bash)
Session state management for Linux/macOS/WSL.

**Commands**:
```bash
# Initialize new session
./.manage-session-state.sh init "uuid" "PIPELINE-XXX" 1 "auto"

# Update session state
./.manage-session-state.sh update "event_name" "Description"

# Read current state
./.manage-session-state.sh read

# Save checkpoint
./.manage-session-state.sh checkpoint

# Show history
./.manage-session-state.sh history
```

## Subdirectories

### `logs/`
Session and agent execution logs. Structure:
```
logs/
├── session-YYYY-MM-DD-HH-MM-SS.log   # Session-level logs
└── agent-[name]-[timestamp].log      # Agent-specific logs
```

### `manifests/`
Agent completion manifests. Each manifest documents:
- Agent name and invocation
- Input parameters
- Output artifacts created
- Completion status
- Timing information

### `reports/`
Pipeline progress reports generated by Phase 9 (Report).
- Summary reports
- Metrics and statistics
- Project timeline

### `reviews/`
Code review reports from Phase 7 (Quality).
- Security audit results
- Code quality issues
- Test coverage reports

### `verification/`
E2E verification reports from Phase 8 (Verification).
- Feature verification status
- Test results
- Bug reports (if any)

### `token-usage/`
Token usage tracking files for cost estimation.
- Per-session token counts
- Per-phase token usage
- Historical trends

## Workflows

### Starting a New Session

1. Initialize session state:
```powershell
.\.manage-session-state.ps1 -Action init -SessionId "new-uuid" -PipelineId "PIPELINE-XXX-001" -Phase 1
```

2. Run pipeline phases

3. Save checkpoints periodically:
```powershell
.\.manage-session-state.ps1 -Action checkpoint
```

### Resuming a Session

1. Read `.session-context.md` for quick overview

2. Check `pipeline-state.json` for current phase

3. Read `session-state.json` for detailed state:
```powershell
.\.manage-session-state.ps1 -Action read
```

4. Continue from current phase

### Tracking Progress

1. Check session history:
```powershell
.\.manage-session-state.ps1 -Action history
```

2. Review phase progress in `pipeline-state.json`

3. Check task status in `status.json`

### Saving Checkpoints

Checkpoints should be saved at:
- End of each phase
- Before long-running operations
- At token usage thresholds (50%, 75%, 90%)
- On errors or pauses

```powershell
.\.manage-session-state.ps1 -Action checkpoint
```

## Event Types

Common session events tracked:

| Event | Description |
|-------|-------------|
| `session_started` | Session initialized |
| `session_resumed` | Session resumed from checkpoint |
| `phase_started` | New phase began |
| `phase_completed` | Phase finished successfully |
| `phase_failed` | Phase encountered error |
| `checkpoint_saved` | Checkpoint created |
| `agent_delegated` | Sub-agent invoked |
| `task_started` | Implementation task started |
| `task_completed` | Implementation task finished |
| `feature_completed` | Feature implementation done |
| `token_threshold_50` | 50% token usage reached |
| `token_threshold_75` | 75% token usage reached |
| `token_threshold_90` | 90% token usage reached |
| `session_paused` | Manual pause requested |
| `session_completed` | Pipeline finished |

## Token Usage Thresholds

| Threshold | Action |
|-----------|--------|
| **50%** | Log warning, save checkpoint, continue |
| **75%** | Log warning, save checkpoint, suggest wrapping up |
| **90%** | Log warning, save checkpoint, complete current task only, pause |

## Integration with Agents

All RLM agents should:

1. **Read session context** at startup:
   - Parse `.session-context.md` for quick orientation
   - Read `session-state.json` for detailed state
   - Check `pipeline-state.json` for phase progress

2. **Update session state** during execution:
   - Log significant events
   - Update token usage periodically
   - Track active feature/task

3. **Save checkpoints** at key points:
   - End of phase
   - Before long operations
   - At token thresholds
   - On errors

## Best Practices

1. **Always initialize** session state at the start of work
2. **Log events frequently** to maintain audit trail
3. **Save checkpoints** at phase boundaries
4. **Monitor token usage** and warn at thresholds
5. **Use descriptive event names** for clarity
6. **Keep context file updated** for human readability
7. **Clean up old logs** periodically (archive completed sessions)

## Troubleshooting

### "No session state found"
Initialize a new session with the init command.

### "Permission denied" on scripts
On Unix systems, make scripts executable:
```bash
chmod +x .manage-session-state.sh
```

### Checkpoint not saving
Check file permissions on the progress directory. Ensure write access.

### Session history too large
This is normal for long-running pipelines. History provides full audit trail.

## Documentation

For comprehensive documentation, see:
- **`RLM/docs/SESSION-STATE.md`** - Full session state documentation
- **`RLM/START-HERE.md`** - Pipeline overview
- **`RLM/prompts/00-FULL-PIPELINE.md`** - Orchestration protocol

## Version

**Session State System Version**: 1.0  
**Last Updated**: 2026-02-18  
**Maintainer**: RLM Pipeline Team
